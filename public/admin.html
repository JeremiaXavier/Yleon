<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Quiz Management</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function AdminApp() {
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [isLoading, setIsLoading] = useState(true);
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [loginError, setLoginError] = useState('');
            const [adminUsername, setAdminUsername] = useState('');
            const [activeTab, setActiveTab] = useState('control');
            const [examStatus, setExamStatus] = useState({ isActive: false, duration: 60 });
            const [duration, setDuration] = useState(60);
            const [questions, setQuestions] = useState([]);
            const [scoreboard, setScoreboard] = useState([]);
            const [stats, setStats] = useState({});
            const [newQuestion, setNewQuestion] = useState({
                question: '',
                option_a: '',
                option_b: '',
                option_c: '',
                option_d: '',
                correct_answer: ''
            });

            useEffect(() => {
                checkAuth();
            }, []);

            useEffect(() => {
                if (isAuthenticated) {
                    // Load all data after authentication
                    checkExamStatus();
                    loadQuestions();
                    loadStats();
                    
                    // Set up polling for exam status
                    const interval = setInterval(checkExamStatus, 5000);
                    return () => clearInterval(interval);
                }
            }, [isAuthenticated]);

            const checkAuth = async () => {
                try {
                    const res = await fetch('/api/admin/check-auth');
                    const data = await res.json();
                    setIsAuthenticated(data.isAuthenticated);
                    setAdminUsername(data.username || '');
                } catch (error) {
                    console.error('Auth check failed:', error);
                    setIsAuthenticated(false);
                } finally {
                    setIsLoading(false);
                }
            };

            const handleLogin = async (e) => {
                e.preventDefault();
                setLoginError('');

                try {
                    const res = await fetch('/api/admin/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ username, password })
                    });

                    const data = await res.json();
                    if (data.success) {
                        setIsAuthenticated(true);
                        setAdminUsername(username);
                        setPassword('');
                    } else {
                        setLoginError(data.error || 'Login failed');
                    }
                } catch (error) {
                    setLoginError('Login failed. Please try again.');
                }
            };

            const handleLogout = async () => {
                try {
                    await fetch('/api/admin/logout', { method: 'POST' });
                    setIsAuthenticated(false);
                    setAdminUsername('');
                    setUsername('');
                    setPassword('');
                } catch (error) {
                    console.error('Logout failed:', error);
                }
            };

            const checkExamStatus = async () => {
                try {
                    const res = await fetch('/api/exam-status');
                    const data = await res.json();
                    setExamStatus(data);
                    setDuration(data.duration);
                } catch (error) {
                    console.error('Failed to check exam status:', error);
                }
            };

            const setExamDuration = async () => {
                if (duration < 1 || duration > 300) {
                    alert('Duration must be between 1 and 300 minutes');
                    return;
                }

                try {
                    const res = await fetch('/api/admin/set-duration', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ duration })
                    });

                    const data = await res.json();
                    if (data.success) {
                        alert(`‚úì Duration set to ${duration} minutes`);
                        checkExamStatus();
                    }
                } catch (error) {
                    alert('Failed to set duration');
                }
            };

            const startExam = async () => {
                if (!window.confirm(`Start exam with ${duration} minutes duration?`)) return;

                try {
                    const res = await fetch('/api/admin/start-exam', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' }
                    });

                    const data = await res.json();
                    if (data.success) {
                        alert('‚úì Exam started successfully!');
                        checkExamStatus();
                    }
                } catch (error) {
                    alert('Failed to start exam');
                }
            };

            const endExam = async () => {
                if (!window.confirm('End the exam? All active sessions will be terminated.')) return;

                try {
                    const res = await fetch('/api/admin/end-exam', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' }
                    });

                    const data = await res.json();
                    if (data.success) {
                        alert('‚úì Exam ended successfully!');
                        checkExamStatus();
                    }
                } catch (error) {
                    alert('Failed to end exam');
                }
            };

            const loadQuestions = async () => {
                try {
                    const res = await fetch('/api/admin/questions');
                    const data = await res.json();
                    setQuestions(data);
                } catch (error) {
                    console.error('Failed to load questions:', error);
                }
            };

            const addQuestion = async (e) => {
                e.preventDefault();

                if (!newQuestion.correct_answer) {
                    alert('Please select the correct answer');
                    return;
                }

                try {
                    const res = await fetch('/api/admin/questions', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(newQuestion)
                    });

                    const data = await res.json();
                    if (data.success) {
                        alert('‚úì Question added successfully!');
                        setNewQuestion({
                            question: '',
                            option_a: '',
                            option_b: '',
                            option_c: '',
                            option_d: '',
                            correct_answer: ''
                        });
                        loadQuestions();
                        loadStats();
                    }
                } catch (error) {
                    alert('Failed to add question');
                }
            };

            const deleteQuestion = async (id) => {
                if (!window.confirm('Delete this question?')) return;

                try {
                    const res = await fetch(`/api/admin/questions/${id}`, {
                        method: 'DELETE'
                    });

                    const data = await res.json();
                    if (data.success) {
                        alert('‚úì Question deleted');
                        loadQuestions();
                        loadStats();
                    }
                } catch (error) {
                    alert('Failed to delete question');
                }
            };

            const loadScoreboard = async () => {
                try {
                    const res = await fetch('/api/scoreboard');
                    const data = await res.json();
                    setScoreboard(data);
                } catch (error) {
                    console.error('Failed to load scoreboard:', error);
                }
            };

            const loadStats = async () => {
                try {
                    const res = await fetch('/api/admin/stats');
                    const data = await res.json();
                    setStats(data);
                } catch (error) {
                    console.error('Failed to load stats:', error);
                }
            };

            const resetAll = async () => {
                if (!window.confirm('Reset all answers and scoreboard? Questions will be kept. This cannot be undone!')) return;

                try {
                    const res = await fetch('/api/admin/reset-all', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' }
                    });

                    const data = await res.json();
                    if (data.success) {
                        alert('‚úì Database reset successfully!');
                        loadScoreboard();
                        loadStats();
                    }
                } catch (error) {
                    alert('Failed to reset database');
                }
            };

            const resetQuestions = async () => {
                if (!window.confirm('Reset ALL data including questions? This will delete EVERYTHING! This cannot be undone!')) return;

                try {
                    const res = await fetch('/api/admin/reset-questions', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' }
                    });

                    const data = await res.json();
                    if (data.success) {
                        alert('‚úì All data deleted successfully!');
                        loadQuestions();
                        loadScoreboard();
                        loadStats();
                    }
                } catch (error) {
                    alert('Failed to reset questions');
                }
            };

            useEffect(() => {
                if (activeTab === 'scoreboard') {
                    loadScoreboard();
                }
            }, [activeTab]);

            return (
                <div className="min-h-screen bg-gray-100">
                    {isLoading ? (
                        <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900">
                            <div className="text-center">
                                <div className="text-3xl font-bold text-white mb-2">Yleon</div>
                                <div className="text-white">Loading...</div>
                            </div>
                        </div>
                    ) : !isAuthenticated ? (
                        <div className="min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900 flex items-center justify-center p-4">
                            <div className="bg-white rounded-lg shadow-2xl p-8 max-w-md w-full">
                                <div className="text-center mb-8">
                                    <div className="bg-blue-600 text-white text-3xl font-bold py-3 px-6 rounded-lg inline-block mb-4">
                                        Yleon
                                    </div>
                                    <h1 className="text-2xl font-bold text-gray-800">Admin Login</h1>
                                    <p className="text-gray-600 mt-2">Enter your credentials to continue</p>
                                </div>

                                <form onSubmit={handleLogin} className="space-y-4">
                                    {loginError && (
                                        <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">
                                            {loginError}
                                        </div>
                                    )}

                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">
                                            Username
                                        </label>
                                        <input
                                            type="text"
                                            value={username}
                                            onChange={(e) => setUsername(e.target.value)}
                                            required
                                            className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                                            placeholder="Enter username"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">
                                            Password
                                        </label>
                                        <input
                                            type="password"
                                            value={password}
                                            onChange={(e) => setPassword(e.target.value)}
                                            required
                                            className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                                            placeholder="Enter password"
                                        />
                                    </div>

                                    <button
                                        type="submit"
                                        className="w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold transition-colors"
                                    >
                                        Login
                                    </button>
                                </form>

                            </div>
                        </div>
                    ) : (
                    <div>
                    {/* Header */}
                    <div className="bg-blue-900 text-white px-6 py-4">
                        <div className="max-w-7xl mx-auto flex justify-between items-center">
                            <div>
                                <h1 className="text-2xl font-bold">Yleon</h1>
                                <p className="text-blue-200">Exam Management System</p>
                            </div>
                            <div className="flex items-center space-x-4">
                                <span className="text-sm">Logged in as: <strong>{adminUsername}</strong></span>
                                <button
                                    onClick={handleLogout}
                                    className="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-semibold transition-colors"
                                >
                                    Logout
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* Navigation Tabs */}
                    <div className="bg-white shadow">
                        <div className="max-w-7xl mx-auto">
                            <div className="flex space-x-1">
                                {['control', 'questions', 'scoreboard', 'settings'].map((tab) => (
                                    <button
                                        key={tab}
                                        onClick={() => setActiveTab(tab)}
                                        className={`px-6 py-3 font-semibold capitalize ${
                                            activeTab === tab
                                                ? 'bg-blue-600 text-white'
                                                : 'text-gray-600 hover:bg-gray-100'
                                        }`}
                                    >
                                        {tab}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Content Area */}
                    <div className="max-w-7xl mx-auto p-6">
                        {/* Control Tab */}
                        {activeTab === 'control' && (
                            <div className="space-y-6">
                                {/* Status Card */}
                                <div className="bg-white rounded-lg shadow p-6">
                                    <h2 className="text-xl font-bold mb-4">Exam Status</h2>
                                    <div className="flex items-center space-x-4">
                                        <span className={`px-4 py-2 rounded-full font-semibold ${
                                            examStatus.isActive 
                                                ? 'bg-green-100 text-green-800' 
                                                : 'bg-red-100 text-red-800'
                                        }`}>
                                            {examStatus.isActive ? 'üü¢ Active' : 'üî¥ Inactive'}
                                        </span>
                                        <span className="text-gray-600">
                                            Duration: <strong>{examStatus.duration} minutes</strong>
                                        </span>
                                    </div>
                                </div>

                                {/* Statistics */}
                                <div className="grid grid-cols-3 gap-6">
                                    <div className="bg-white rounded-lg shadow p-6">
                                        <div className="text-3xl font-bold text-blue-600">{stats.totalQuestions || 0}</div>
                                        <div className="text-gray-600 mt-1">Total Questions</div>
                                    </div>
                                    <div className="bg-white rounded-lg shadow p-6">
                                        <div className="text-3xl font-bold text-green-600">{stats.totalParticipants || 0}</div>
                                        <div className="text-gray-600 mt-1">Participants</div>
                                    </div>
                                    <div className="bg-white rounded-lg shadow p-6">
                                        <div className="text-3xl font-bold text-purple-600">{stats.averageScore || 0}</div>
                                        <div className="text-gray-600 mt-1">Average Score</div>
                                    </div>
                                </div>

                                {/* Exam Controls */}
                                <div className="bg-white rounded-lg shadow p-6">
                                    <h2 className="text-xl font-bold mb-4">Exam Controls</h2>
                                    
                                    <div className="mb-6">
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">
                                            Set Exam Duration (minutes)
                                        </label>
                                        <div className="flex space-x-3">
                                            <input
                                                type="number"
                                                min="1"
                                                max="300"
                                                value={duration}
                                                onChange={(e) => setDuration(parseInt(e.target.value))}
                                                className="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                            />
                                            <button
                                                onClick={setExamDuration}
                                                className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold"
                                            >
                                                Set Duration
                                            </button>
                                        </div>
                                    </div>

                                    <div className="grid grid-cols-2 gap-4">
                                        <button
                                            onClick={startExam}
                                            disabled={examStatus.isActive}
                                            className={`py-3 rounded-lg font-semibold ${
                                                examStatus.isActive
                                                    ? 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                                    : 'bg-green-600 text-white hover:bg-green-700'
                                            }`}
                                        >
                                            üü¢ Start Exam
                                        </button>
                                        <button
                                            onClick={endExam}
                                            disabled={!examStatus.isActive}
                                            className={`py-3 rounded-lg font-semibold ${
                                                !examStatus.isActive
                                                    ? 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                                    : 'bg-red-600 text-white hover:bg-red-700'
                                            }`}
                                        >
                                            üî¥ End Exam
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Questions Tab */}
                        {activeTab === 'questions' && (
                            <div className="space-y-6">
                                {/* Add Question Form */}
                                <div className="bg-white rounded-lg shadow p-6">
                                    <h2 className="text-xl font-bold mb-4">Add New Question</h2>
                                    <form onSubmit={addQuestion} className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-semibold text-gray-700 mb-2">
                                                Question
                                            </label>
                                            <textarea
                                                value={newQuestion.question}
                                                onChange={(e) => setNewQuestion({...newQuestion, question: e.target.value})}
                                                required
                                                rows="3"
                                                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                                placeholder="Enter your question here..."
                                            />
                                        </div>

                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="block text-sm font-semibold text-gray-700 mb-2">Option A</label>
                                                <input
                                                    type="text"
                                                    value={newQuestion.option_a}
                                                    onChange={(e) => setNewQuestion({...newQuestion, option_a: e.target.value})}
                                                    required
                                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-semibold text-gray-700 mb-2">Option B</label>
                                                <input
                                                    type="text"
                                                    value={newQuestion.option_b}
                                                    onChange={(e) => setNewQuestion({...newQuestion, option_b: e.target.value})}
                                                    required
                                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-semibold text-gray-700 mb-2">Option C</label>
                                                <input
                                                    type="text"
                                                    value={newQuestion.option_c}
                                                    onChange={(e) => setNewQuestion({...newQuestion, option_c: e.target.value})}
                                                    required
                                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-semibold text-gray-700 mb-2">Option D</label>
                                                <input
                                                    type="text"
                                                    value={newQuestion.option_d}
                                                    onChange={(e) => setNewQuestion({...newQuestion, option_d: e.target.value})}
                                                    required
                                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                                />
                                            </div>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-semibold text-gray-700 mb-2">
                                                Correct Answer
                                            </label>
                                            <select
                                                value={newQuestion.correct_answer}
                                                onChange={(e) => setNewQuestion({...newQuestion, correct_answer: e.target.value})}
                                                required
                                                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                            >
                                                <option value="">Select correct answer</option>
                                                <option value="a">A</option>
                                                <option value="b">B</option>
                                                <option value="c">C</option>
                                                <option value="d">D</option>
                                            </select>
                                        </div>

                                        <button
                                            type="submit"
                                            className="w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold"
                                        >
                                            ‚ûï Add Question
                                        </button>
                                    </form>
                                </div>

                                {/* Questions List */}
                                <div className="bg-white rounded-lg shadow p-6">
                                    <h2 className="text-xl font-bold mb-4">All Questions ({questions.length})</h2>
                                    {questions.length === 0 ? (
                                        <p className="text-gray-500 text-center py-8">No questions added yet</p>
                                    ) : (
                                        <div className="space-y-4">
                                            {questions.map((q, index) => (
                                                <div key={q.id} className="border border-gray-200 rounded-lg p-4">
                                                    <div className="flex justify-between items-start mb-3">
                                                        <div className="flex-1">
                                                            <span className="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-semibold">
                                                                Q{index + 1}
                                                            </span>
                                                            <p className="font-semibold text-gray-800 mt-2">{q.question}</p>
                                                        </div>
                                                        <button
                                                            onClick={() => deleteQuestion(q.id)}
                                                            className="ml-4 px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm"
                                                        >
                                                            Delete
                                                        </button>
                                                    </div>
                                                    <div className="grid grid-cols-2 gap-2 text-sm">
                                                        {['a', 'b', 'c', 'd'].map((opt) => (
                                                            <div
                                                                key={opt}
                                                                className={`p-2 rounded ${
                                                                    q.correct_answer === opt
                                                                        ? 'bg-green-100 border-2 border-green-500 font-semibold'
                                                                        : 'bg-gray-50'
                                                                }`}
                                                            >
                                                                <span className="font-semibold uppercase">{opt}.</span> {q[`option_${opt}`]}
                                                            </div>
                                                        ))}
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                        {/* Scoreboard Tab */}
                        {activeTab === 'scoreboard' && (
                            <div className="space-y-6">
                                <div className="bg-white rounded-lg shadow p-6">
                                    <div className="flex justify-between items-center mb-4">
                                        <h2 className="text-xl font-bold">Scoreboard</h2>
                                        <button
                                            onClick={loadScoreboard}
                                            className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold"
                                        >
                                            üîÑ Refresh
                                        </button>
                                    </div>

                                    {scoreboard.length === 0 ? (
                                        <p className="text-gray-500 text-center py-8">No results yet</p>
                                    ) : (
                                        <div className="overflow-x-auto">
                                            <table className="w-full">
                                                <thead className="bg-gray-50">
                                                    <tr>
                                                        <th className="px-4 py-3 text-left text-sm font-semibold text-gray-700">Rank</th>
                                                        <th className="px-4 py-3 text-left text-sm font-semibold text-gray-700">Name</th>
                                                        <th className="px-4 py-3 text-center text-sm font-semibold text-gray-700">Score</th>
                                                        <th className="px-4 py-3 text-center text-sm font-semibold text-gray-700">Percentage</th>
                                                        <th className="px-4 py-3 text-center text-sm font-semibold text-gray-700">Status</th>
                                                        <th className="px-4 py-3 text-left text-sm font-semibold text-gray-700">Completed</th>
                                                    </tr>
                                                </thead>
                                                <tbody className="divide-y divide-gray-200">
                                                    {scoreboard.map((item, index) => (
                                                        <tr key={index} className="hover:bg-gray-50">
                                                            <td className="px-4 py-3">
                                                                <span className={`inline-block px-3 py-1 rounded-full font-bold text-sm ${
                                                                    index === 0 ? 'bg-yellow-400 text-yellow-900' :
                                                                    index === 1 ? 'bg-gray-300 text-gray-800' :
                                                                    index === 2 ? 'bg-orange-400 text-orange-900' :
                                                                    'bg-gray-200 text-gray-700'
                                                                }`}>
                                                                    #{index + 1}
                                                                </span>
                                                            </td>
                                                            <td className="px-4 py-3 font-semibold">{item.name}</td>
                                                            <td className="px-4 py-3 text-center font-bold">{item.score}/{item.total_questions}</td>
                                                            <td className="px-4 py-3 text-center">
                                                                {((item.score / item.total_questions) * 100).toFixed(1)}%
                                                            </td>
                                                            <td className="px-4 py-3 text-center">
                                                                <span className={`px-2 py-1 rounded-full text-xs font-semibold ${
                                                                    item.auto_submitted ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'
                                                                }`}>
                                                                    {item.auto_submitted ? '‚è∞ Auto' : '‚úì Manual'}
                                                                </span>
                                                            </td>
                                                            <td className="px-4 py-3 text-sm text-gray-600">
                                                                {new Date(item.completed_at).toLocaleString()}
                                                            </td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                        {/* Settings Tab */}
                        {activeTab === 'settings' && (
                            <div className="space-y-6">
                                <div className="bg-white rounded-lg shadow p-6">
                                    <h2 className="text-xl font-bold mb-4 text-red-600">‚ö†Ô∏è Danger Zone</h2>
                                    <p className="text-gray-600 mb-6">These actions cannot be undone. Use with caution.</p>
                                    
                                    <div className="space-y-4">
                                        <div className="border-2 border-yellow-300 rounded-lg p-4 bg-yellow-50">
                                            <h3 className="font-bold text-gray-800 mb-2">Reset Answers & Scoreboard</h3>
                                            <p className="text-sm text-gray-600 mb-3">
                                                Deletes all participant answers and scoreboard data. Questions will be kept intact.
                                            </p>
                                            <button
                                                onClick={resetAll}
                                                className="px-6 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 font-semibold"
                                            >
                                                Reset Answers & Scoreboard
                                            </button>
                                        </div>

                                        <div className="border-2 border-red-300 rounded-lg p-4 bg-red-50">
                                            <h3 className="font-bold text-gray-800 mb-2">Reset Everything (Including Questions)</h3>
                                            <p className="text-sm text-gray-600 mb-3">
                                                Deletes ALL data including questions, answers, and scoreboard. Complete database reset.
                                            </p>
                                            <button
                                                onClick={resetQuestions}
                                                className="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-semibold"
                                            >
                                                Reset All Data
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white rounded-lg shadow p-6">
                                    <h2 className="text-xl font-bold mb-4">System Information</h2>
                                    <div className="space-y-2 text-sm">
                                        <div className="flex justify-between py-2 border-b">
                                            <span className="text-gray-600">Total Questions:</span>
                                            <span className="font-semibold">{stats.totalQuestions || 0}</span>
                                        </div>
                                        <div className="flex justify-between py-2 border-b">
                                            <span className="text-gray-600">Total Participants:</span>
                                            <span className="font-semibold">{stats.totalParticipants || 0}</span>
                                        </div>
                                        <div className="flex justify-between py-2 border-b">
                                            <span className="text-gray-600">Average Score:</span>
                                            <span className="font-semibold">{stats.averageScore || 0}</span>
                                        </div>
                                        <div className="flex justify-between py-2">
                                            <span className="text-gray-600">Exam Status:</span>
                                            <span className={`font-semibold ${examStatus.isActive ? 'text-green-600' : 'text-red-600'}`}>
                                                {examStatus.isActive ? 'Active' : 'Inactive'}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                    <footer className="bg-blue-900 text-white text-center py-4 mt-12">
                        ¬© 2025 Yleon. All rights reserved.
                    </footer>
                    </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<AdminApp />, document.getElementById('root'));
    </script>
</body>
</html>